---
import { renderToStaticMarkup } from "react-dom/server";
import BaseLayout from "../layouts/BaseLayout.astro";
import AppIconShowcase from "../components/app-icon-showcase";
import DownloadButton from "../components/download-button";
import PrivacyLock from "../components/privacy-lock";
import SiteFooter from "../components/site-footer";
import SiteHeader from "../components/site-header";
import SpeedShowcase from "../components/speed-showcase";
import TextCleanupShowcase from "../components/text-cleanup-showcase";
import { PLATFORM_CONFIG, PLATFORM_ORDER } from "../lib/downloads";
import styles from "../styles/page.module.css";

const platformIcons = PLATFORM_ORDER.map((platform) => {
  const { Icon, name, id } = PLATFORM_CONFIG[platform];
  return {
    id,
    name,
    markup: renderToStaticMarkup(
      Icon({ className: styles.heroPlatformIcon, size: 24 }),
    ),
  };
});

const currentYear = new Date().getFullYear();
---

<BaseLayout>
  <div class={styles.page}>
    <SiteHeader client:load />

    <main class={styles.main}>
      <section class={styles.heroContent} id="overview">
        <h1 class={styles.heroTitle}>Your keyboard is holding you back.</h1>
        <p class={styles.heroSubtitle}>
          Make voice your new keyboard. Type four times faster by using your
          voice.
        </p>
        <div class={styles.heroActions}>
          <DownloadButton client:load />
        </div>
        <div class={styles.heroMeta}>
          <p class={styles.heroNote}>
            No credit card required, get started for free.
          </p>
          <div class={styles.heroPlatformList} aria-label="Desktop downloads">
            {platformIcons.map((icon) => (
              <span
                class={styles.heroPlatformBadge}
                role="img"
                aria-label={icon.name}
                title={icon.name}
                set:html={icon.markup}
              />
            ))}
          </div>
          <a
            href="/download"
            class={`${styles.inlineLink} ${styles.heroMoreLink}`}
          >
            More download options
          </a>
        </div>
      </section>

      <SpeedShowcase client:load />

      <section class={styles.splitSection} id="features">
        <div class={`${styles.splitMedia} ${styles.iconShowcaseMedia}`}>
          <AppIconShowcase />
        </div>
        <div class={styles.splitContent}>
          <span class={styles.badge}>Works on any app</span>
          <h2>Your voice, everywhere you write.</h2>
          <p>
            Voquill integrates seamlessly with any application on your system.
            Whether you're drafting emails, writing code, or taking notes, your
            voice works everywhere your keyboard does.
          </p>
        </div>
      </section>

      <section class={styles.splitSection} id="privacy">
        <div class={styles.splitContent}>
          <span class={styles.badge}>Private and secure</span>
          <h2>Your data is yours. Period.</h2>
          <p>
            Process everything locally on your device, or bring your own API key
            to connect to the Groq API. Don't believe us? See for yourself.
            Voquill is fully open-source.
          </p>
          <a
            href="https://github.com/josiahsrc/voquill"
            target="_blank"
            rel="noopener noreferrer"
            class={styles.inlineLink}
          >
            GitHub Source Code →
          </a>
        </div>
        <div class={`${styles.splitMedia} ${styles.privacyMedia}`}>
          <PrivacyLock />
        </div>
      </section>

      <section class={styles.splitSection}>
        <div class={styles.splitMedia}>
          <TextCleanupShowcase client:load />
        </div>
        <div class={styles.splitContent}>
          <span class={styles.badge}>Smart text cleanup</span>
          <h2>Uhh? Umm? Not anymore.</h2>
          <p>
            Voquill uses AI to clean up your transcripts. It removes filler
            words, hesitations, false starts, etc. Speak naturally, Voquill will
            handle the rest.
          </p>
        </div>
      </section>
    </main>

    <SiteFooter client:load />

    <div class={styles.pageMeta}>
      <span>© {currentYear} Handaptive LLC</span>
      <div class={styles.pageLinks}>
        <a href="/privacy">Privacy</a>
        <a href="/terms">Terms</a>
        <a href="mailto:hello@voquill.com">Contact</a>
      </div>
    </div>
  </div>
</BaseLayout>
